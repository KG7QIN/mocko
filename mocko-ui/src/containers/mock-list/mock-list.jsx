import React, {useContext} from 'react';
import {List} from "../../components/list/list";
import {MockItem} from "../mock-item/mock-item";
import {Spinner} from "../../components/spinner/spinner";
import {Mocks} from "../../contexts/mock";
import {Link} from "react-router-dom";
import {Button} from "../../components/button/button";
import {NoMocks} from "./styles";
import { Title, TitleButton, TitleText } from '../../components/title/styles';

export function MockList() {
    const { mocks, isLoading, hasError, removeMock } = useContext(Mocks);

    if(isLoading) {
        return <Spinner/>;
    }
    if(hasError) {
        return "Oops! Failed to load mocks";
    }
    if(mocks.length === 0) {
        return (
            <NoMocks>
                <svg width="491" height="341" viewBox="0 0 491 341" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0)">
                        <path d="M93.1497 73.2046C108.637 73.2046 121.192 60.6442 121.192 45.1502C121.192 29.6561 108.637 17.0957 93.1497 17.0957C77.6624 17.0957 65.1074 29.6561 65.1074 45.1502C65.1074 60.6442 77.6624 73.2046 93.1497 73.2046Z" fill="#FF6584"/>
                        <path d="M229.586 150.408C229.586 216.604 190.251 239.717 141.728 239.717C93.2053 239.717 53.8699 216.604 53.8699 150.408C53.8699 84.2117 141.728 0 141.728 0C141.728 0 229.586 84.2117 229.586 150.408Z" fill="#252525"/>
                        <path d="M138.527 229.591L139.427 174.191L176.874 105.653L139.569 165.5L139.973 140.59L165.781 91.0038L140.08 133.998L140.807 89.196L168.444 49.7191L140.922 82.1509L141.376 0L138.52 108.753L138.754 104.267L110.656 61.2393L138.304 112.879L135.686 162.915L135.608 161.587L103.216 116.307L135.51 166.279L135.183 172.536L135.124 172.63L135.151 173.144L128.508 300.09H137.383L138.448 234.52L170.662 184.671L138.527 229.591Z" fill="#323232"/>
                        <path d="M491 177.52C491 231.704 458.802 250.623 419.084 250.623C379.366 250.623 347.168 231.704 347.168 177.52C347.168 123.335 419.084 54.4037 419.084 54.4037C419.084 54.4037 491 123.335 491 177.52Z" fill="#252525"/>
                        <path d="M416.464 242.335L417.2 196.987L447.853 140.886L417.316 189.873L417.647 169.484L438.773 128.894L417.735 164.087L418.33 127.415L440.952 95.1011L418.424 121.649L418.796 54.4037L416.458 143.423L416.65 139.751L393.65 104.531L416.281 146.801L414.138 187.758L414.074 186.67L387.56 149.607L413.994 190.511L413.726 195.633L413.678 195.71L413.7 196.13L408.263 300.042H415.527L416.398 246.369L442.768 205.566L416.464 242.335Z" fill="#323232"/>
                        <path d="M243.001 310.577C377.206 310.577 486.002 305.075 486.002 298.288C486.002 291.502 377.206 286 243.001 286C108.795 286 0 291.502 0 298.288C0 305.075 108.795 310.577 243.001 310.577Z" fill="#323232"/>
                        <path d="M391.035 320.697C414.021 320.697 432.655 319.754 432.655 318.592C432.655 317.429 414.021 316.487 391.035 316.487C368.049 316.487 349.415 317.429 349.415 318.592C349.415 319.754 368.049 320.697 391.035 320.697Z" fill="#323232"/>
                        <path d="M240.428 341C263.414 341 282.048 340.058 282.048 338.895C282.048 337.733 263.414 336.79 240.428 336.79C217.441 336.79 198.807 337.733 198.807 338.895C198.807 340.058 217.441 341 240.428 341Z" fill="#323232"/>
                        <path d="M126.166 326.68C178.681 326.68 221.253 324.527 221.253 321.872C221.253 319.216 178.681 317.063 126.166 317.063C73.6509 317.063 31.0789 319.216 31.0789 321.872C31.0789 324.527 73.6509 326.68 126.166 326.68Z" fill="#323232"/>
                        <path d="M42.5383 282.855C61.6555 282.855 77.153 267.35 77.153 248.225C77.153 229.099 61.6555 213.595 42.5383 213.595C23.4211 213.595 7.92358 229.099 7.92358 248.225C7.92358 267.35 23.4211 282.855 42.5383 282.855Z" fill="#424242"/>
                        <path d="M36.9607 275.339L26.4456 275.215L26.2236 294.063L36.7387 294.187L36.9607 275.339Z" fill="#424242"/>
                        <path d="M43.7463 294.488C43.7677 292.673 39.8619 291.155 35.0224 291.098C30.183 291.04 26.2425 292.466 26.2211 294.282C26.1997 296.097 30.1055 297.615 34.945 297.672C39.7844 297.729 43.7249 296.304 43.7463 294.488Z" fill="#424242"/>
                        <path d="M43.5179 251.304C50.0516 251.304 55.3482 246.005 55.3482 239.469C55.3482 232.932 50.0516 227.633 43.5179 227.633C36.9841 227.633 31.6875 232.932 31.6875 239.469C31.6875 246.005 36.9841 251.304 43.5179 251.304Z" fill="white"/>
                        <path d="M43.5177 243.414C45.6956 243.414 47.4611 241.648 47.4611 239.469C47.4611 237.29 45.6956 235.524 43.5177 235.524C41.3398 235.524 39.5742 237.29 39.5742 239.469C39.5742 241.648 41.3398 243.414 43.5177 243.414Z" fill="#323232"/>
                        <path d="M9.34242 215.627C6.69512 203.072 15.7779 190.525 29.6295 187.601C43.481 184.678 56.856 192.486 59.5033 205.04C62.1506 217.595 52.9404 222.105 39.0889 225.029C25.2373 227.952 11.9897 228.181 9.34242 215.627Z" fill="#2E7D32"/>
                        <path d="M95.3403 267.544C95.3403 291.686 80.995 300.116 63.2976 300.116C62.8876 300.116 62.4783 300.112 62.0696 300.102C61.2497 300.085 60.4375 300.046 59.6351 299.991C43.6636 298.86 31.2549 289.997 31.2549 267.544C31.2549 244.308 60.9354 214.987 63.1648 212.817L63.1688 212.813C63.2547 212.729 63.2976 212.688 63.2976 212.688C63.2976 212.688 95.3403 243.401 95.3403 267.544Z" fill="#2E7D32"/>
                        <path d="M62.1302 296.423L73.8497 280.04L62.1009 298.222L62.0697 300.102C61.2497 300.085 60.4375 300.046 59.6352 299.991L60.8983 275.837L60.8885 275.649L60.91 275.614L61.0291 273.333L49.251 255.106L61.0662 271.622L61.0935 272.106L62.0482 253.856L51.9647 235.023L62.1712 250.653L63.1649 212.817L63.1688 212.689V212.814L63.0028 242.65L73.0415 230.821L62.9618 245.22L62.6963 261.56L72.0692 245.878L62.6573 263.964L62.5089 273.048L76.1163 251.222L62.4582 276.218L62.1302 296.423Z" fill="#323232"/>
                        <path d="M312.183 282.48C331.3 282.48 346.798 266.976 346.798 247.85C346.798 228.725 331.3 213.221 312.183 213.221C293.066 213.221 277.568 228.725 277.568 247.85C277.568 266.976 293.066 282.48 312.183 282.48Z" fill="#424242"/>
                        <path d="M310.447 251.048C316.98 251.048 322.277 245.749 322.277 239.212C322.277 232.676 316.98 227.377 310.447 227.377C303.913 227.377 298.616 232.676 298.616 239.212C298.616 245.749 303.913 251.048 310.447 251.048Z" fill="white"/>
                        <path d="M310.447 243.158C312.625 243.158 314.39 241.391 314.39 239.212C314.39 237.034 312.625 235.267 310.447 235.267C308.269 235.267 306.503 237.034 306.503 239.212C306.503 241.391 308.269 243.158 310.447 243.158Z" fill="#323232"/>
                        <path d="M270.631 226.935C264.282 215.786 269.107 201.065 281.407 194.054C293.707 187.044 308.825 190.398 315.174 201.547C321.523 212.696 314.127 219.801 301.826 226.812C289.526 233.823 276.98 238.083 270.631 226.935Z" fill="#2E7D32"/>
                        <path d="M250.45 263.123C250.45 285.285 237.281 293.023 221.036 293.023C220.659 293.023 220.284 293.019 219.909 293.01C219.156 292.994 218.41 292.958 217.674 292.908C203.013 291.87 191.622 283.734 191.622 263.123C191.622 241.793 218.867 214.878 220.914 212.887L220.918 212.883C220.996 212.806 221.036 212.768 221.036 212.768C221.036 212.768 250.45 240.961 250.45 263.123Z" fill="#2E7D32"/>
                        <path d="M219.964 289.632L230.722 274.594L219.937 291.284L219.909 293.01C219.156 292.994 218.41 292.958 217.674 292.908L218.833 270.735L218.824 270.563L218.844 270.531L218.953 268.437L208.142 251.706L218.987 266.866L219.013 267.311L219.889 250.558L210.633 233.27L220.002 247.618L220.914 212.887L220.917 212.768V212.883L220.765 240.271L229.98 229.413L220.727 242.63L220.484 257.63L229.088 243.235L220.448 259.837L220.312 268.175L232.803 248.14L220.265 271.085L219.964 289.632Z" fill="#323232"/>
                        <path d="M366.124 272.366C366.124 296.508 351.779 304.938 334.081 304.938C333.671 304.938 333.262 304.933 332.853 304.924C332.033 304.907 331.221 304.868 330.419 304.813C314.447 303.682 302.039 294.819 302.039 272.366C302.039 249.129 331.719 219.809 333.949 217.639L333.952 217.635C334.038 217.551 334.081 217.51 334.081 217.51C334.081 217.51 366.124 248.223 366.124 272.366Z" fill="#2E7D32"/>
                        <path d="M332.914 301.245L344.633 284.862L332.885 303.043L332.853 304.924C332.033 304.907 331.221 304.868 330.419 304.813L331.682 280.659L331.672 280.471L331.694 280.436L331.813 278.155L320.035 259.928L331.85 276.444L331.877 276.928L332.832 258.678L322.748 239.844L332.955 255.475L333.949 217.639L333.952 217.51V217.635L333.787 247.471L343.825 235.643L333.746 250.042L333.48 266.381L342.853 250.7L333.441 268.786L333.293 277.87L346.9 256.043L333.242 281.04L332.914 301.245Z" fill="#323232"/>
                        <path d="M314.382 268.581C315.668 265.868 309.709 260.347 301.072 256.249C292.436 252.151 284.392 251.028 283.106 253.741C281.821 256.453 287.779 261.974 296.416 266.072C305.052 270.17 313.096 271.293 314.382 268.581Z" fill="#424242"/>
                        <path d="M47.9687 265.411C49.0851 262.624 42.7976 257.481 33.9252 253.923C25.0528 250.366 16.9552 249.741 15.8388 252.527C14.7224 255.314 21.0099 260.457 29.8823 264.014C38.7548 267.572 46.8523 268.197 47.9687 265.411Z" fill="#424242"/>
                    </g>
                    <defs>
                        <clipPath id="clip0">
                            <rect width="491" height="341" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
                No mocks found
                <br/>
                <Link to="/new-mock">
                    <Button>New Mock</Button>
                </Link>
            </NoMocks>
        );
    }

    return (
        <>
        <Title>
            <TitleText>Mocks</TitleText>
            <Link to="/new-mock">
                <TitleButton>New Mock</TitleButton>
            </Link>
        </Title>
        <List>
            {mocks.map(mock =>
                <MockItem {...mock} key={mock.id} onRemove={() => removeMock(mock.id)}/>)}
        </List>
        </>
    );
}
